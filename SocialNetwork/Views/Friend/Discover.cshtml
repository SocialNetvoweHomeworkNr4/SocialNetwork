@{
    ViewBag.Title = "Discover People";
}

<h2 class="text-center">Discover new people!</h2>

@Html.Partial("_SearchPerson")

<div id="result-container">
    @Html.Partial("_SearchResults")
</div>

@section scripts {
    @Scripts.Render("~/bundles/jquery")

    <script>
        $(document).ready(function () {

            $("[id^='search'], #search-gender").bind("keyup change", function () {
                filterPeople($(".pagination").find(".active a").html(), $("#search-name").val(), $("#search-last-name").val(), $("#search-gender").val());

            })

            function filterPeople(page, firstName, lastName, gender) {

                $.ajax({
                    url: "/Friend/FilterPeople",
                    type: "GET",
                    data: {
                        page: page,
                        firstName: !firstName ? null : firstName,
                        lastName: !lastName ? null : lastName,
                        gender: gender != "Select gender" ? gender : null
                    },
                    success: function (data) {
                        $("#result-container").html(data)
                        console.log("success");
                    },
                    error: function (error) {
                        console.log(error);
                        console.log("zzzz");
                    }
                })
            }
        })
    </script>
}
